require=function i(n,e,t){function s(a,c){if(!e[a]){if(!n[a]){var r="function"==typeof require&&require;if(!c&&r)return r(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var d=e[a]={exports:{}};n[a][0].call(d.exports,function(i){var e=n[a][1][i];return s(e?e:i)},d,d.exports,i,n,e,t)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<t.length;a++)s(t[a]);return s}({Joystick:[function(i,n,e){"use strict";cc._RFpush(n,"ca9c7Qbp6BCuJXhSK3lPf3r","Joystick");var t=i("TiledMapjs");cc.Class({"extends":cc.Component,properties:{directionbtu:cc.Node,direction_bg:cc.Node,R_Direction:"",EnikPrefab:cc.Prefab,tempskinpos:cc.Vec2,skin_Map:cc.Node,SkinNodeRad:t,JoyRad:0},onLoad:function(){this.inputEnabled=!0,this.JoystickInput()},JoystickInput:function(){var i=this,n=i.direction_bg.convertToWorldSpace(cc.Vec2.ZERO),e=cc.view.getVisibleSize().width/2+i.direction_bg.x,t=cc.view.getVisibleSize().height/2+i.direction_bg.y;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(n,e){return i.inputEnabled===!1||(this.Direction(n.getLocationX(),n.getLocationY()),!0)},onTouchMoved:function(n,e){if(i.inputEnabled!==!1){n.getLocation();this.Direction(n.getLocationX(),n.getLocationY())}},onTouchEnded:function(n,e){i.inputEnabled!==!1&&(i.directionbtu.position=i.direction_bg.position)},Direction:function(s,o){var a=this.getRad(s,o);i.JoyRad=parseInt(60*a);var c=.5*i.direction_bg.getContentSize().width-10,r=s-cc.view.getVisibleSize().width/2,h=o-cc.view.getVisibleSize().height/2,d=Math.sqrt(Math.pow(i.direction_bg.x-r,2)+Math.pow(i.direction_bg.y-h,2));if(d>=c){var k=cc.pAdd(this.getAngelePosition(c,a),cc.p(e,t));i.directionbtu.x=k.x-cc.view.getVisibleSize().width/2-n.x,i.directionbtu.y=k.y-cc.view.getVisibleSize().height/2-n.y}else i.directionbtu.x=r,i.directionbtu.y=h},getRad:function(i,n){var s=i,o=n,a=e,c=t,r=s-a,h=c-o,d=Math.sqrt(Math.pow(r,2)+Math.pow(h,2)),k=r/d,p=Math.acos(k);return o<c&&(p=-p),p},getAngelePosition:function(i,n){return cc.p(i*Math.cos(n),i*Math.sin(n))}},i.node)},MapmoveSchedule:function(i){var n=this.SkinNodeJs.getskinheadpos(),e=n.x-this.tempskinpos.x,t=n.y-this.tempskinpos.y;if(Math.abs(e)>400|Math.abs(t)>300){var s=cc.moveTo(1,cc.p(-n.x,-n.y));this.skin_map.runAction(s),this.tempskinpos=n}},update:function(i){this.SkinNodeRad.Settildmaprad(this.JoyRad)}}),cc._RFpop()},{TiledMapjs:"TiledMapjs"}],Skin_play:[function(i,n,e){"use strict";cc._RFpush(n,"e9a79mDuf1L2LH7+B98LV9n","Skin_play");new Array;cc.Class({"extends":cc.Component,properties:{skin_head:cc.SpriteFrame,skin_tail:cc.SpriteFrame,skin_body:{"default":[],type:cc.SpriteFrame}},onAction:function(i,n,e,t){this.isPlaying=!0,this.Framsanim=i,this.framlength=e;var s=this;cc.loader.loadRes("AnimationPlist/"+n+"/"+n,cc.SpriteAtlas,function(i,e){if(i)return void cc.error(i);for(var t=[],o=1;o<s.framlength+1;o++)t.push(e.getSpriteFrame(n+o));var a=cc.AnimationClip.createWithSpriteFrames(t,s.framlength);a.name="anim_run",a.wrapMode=cc.WrapMode.Loop,s.Framsanim.addClip(a),s.Framsanim.play("anim_run")})},skinPlay_init:function(i,n){var e=this;cc.loader.loadRes("skin/snake",cc.SpriteAtlas,function(i,t){return i?void cc.error(i):(e.skin_head.spriteFrame=t.getSpriteFrame("skin_head_"+n),e.skin_tail.spriteFrame=t.getSpriteFrame("skin_body_"+n),void(e.skin_body.spriteFrame=t.getSpriteFrame("skin_body_"+n)))})}}),cc._RFpop()},{}],Skin:[function(i,n,e){"use strict";cc._RFpush(n,"16b2dgayGdHsKoAVeCISU4r","Skin");var t=(i("Skin_play"),i("enemyNumber"));cc.Class({"extends":cc.Component,properties:{skin_long:0,skin_nodelong:30,skin_kill:0,skin_speed:2,skin_type:0,is_enemy:!0,skinlayernum:1e3,skin:{"default":[],type:cc.Node},skinstat:"",skin_bg:cc.Node,skin_rad:-45,tempskin_rad:0,Skinatlas:cc.SpriteAtlas},onLoad:function(){this.skin_long=5,this.skinstat="",this.skin_rad=0,this.ember=2,cc.director.getScheduler().schedule(this.skinmoveSchedule,this,.25)},skin_init:function(i,n){this.is_enemy=n,this.is_enemy?this.skin_type=t.newNumber(1,10):this.skin_type=i;var e=this;cc.loader.loadRes("skin/snake",cc.SpriteAtlas,function(i,n){return i?(cc.error(i),void cc.log("取数据失败！")):(e.Skinatlas=n,void(e.skinstat="load"))})},loadSkinatlas:function(){this.skin[0]=new cc.Node;var i=this.skin[0].addComponent(cc.Sprite);i.spriteFrame=this.Skinatlas.getSpriteFrame("skin_head_"+this.skin_type);for(var n=1;n<this.skin_long-1;++n){this.skin[n]=new cc.Node;var i=this.skin[n].addComponent(cc.Sprite);i.spriteFrame=this.Skinatlas.getSpriteFrame("skin_body_"+this.skin_type),this.skin[n].position=this.skin[n-1].position}this.skin[this.skin_long-1]=new cc.Node;var i=this.skin[this.skin_long-1].addComponent(cc.Sprite);i.spriteFrame=this.Skinatlas.getSpriteFrame("skin_body_"+this.skin_type),this.skin[this.skin_long-1].position=this.skin[this.skin_long-2].position;for(var n=0;n<this.skin_long;++n)this.skin_bg.addChild(this.skin[n],this.skinlayernum--),this.skin[n].rotation=this.skin_rad+90,this.skin[n].scale=.5},skin_setRad:function(i){this.skin_rad=i},skin_move:function(){if(this.is_enemy&0===this.ember){this.ember=t.newNumber(5,500);var i=t.newNumber(-2,2);this.skin_rad=t.newNumber(90*i,90*(i+1))}this.ember-=1;for(var n=this.skin[0].position,e=0;e<this.skin_long;++e){if(0===e){var s=cc.pAdd(this.getAngelePosition(30,this.skin_rad/60),cc.p(this.skin[0].x,this.skin[0].y));this.skin[0].x=s.x,this.skin[0].y=s.y}else{var o=this.skin[e].position;this.skin[e].position=n,n=o}this.skin[0].rotation=-this.skin_rad-90}},getskinheadpos:function(){return this.skin[0].position},Setskinheadpos:function(){return this.skin[0].position=cc.p(0,0)},getAngelePosition:function(i,n){return cc.p(i*Math.cos(n),i*Math.sin(n))},skin_dead:function(){},skin_addnode:function(){this.skin_nodelong++;var i=parseInt(this.skin_nodelong/6);i>this.skin_long&&(this.skin_long=i,cc.log("skin_long = "+this.skin_long),this.skin[this.skin_long-1]=cc.instantiate(this.skin[this.skin_long-2]),this.skin_bg.addChild(this.skin[this.skin_long-1],this.skinlayernum--),this.skin[this.skin_long-1].scale=.5)},skinmoveSchedule:function(i){"move"===this.skinstat&&this.skin_move()},update:function(i){"load"===this.skinstat&&(this.loadSkinatlas(),this.skinstat="move")}}),cc._RFpop()},{Skin_play:"Skin_play",enemyNumber:"enemyNumber"}],TiledMapjs:[function(i,n,e){"use strict";cc._RFpush(n,"759bfQdj5JCr6n/IkxNTt/E","TiledMapjs");var t=i("enemyNumber");cc.Class({"extends":cc.Component,properties:{skin_map:cc.Node,Node_map:cc.Node,SkinNodeJs:cc.Node,SkinNode:cc.Node,EnikPrefab:cc.Prefab,tempskinpos:cc.Vec2,playskinrab:0,loadtempskinpos:cc.Vec2,atlasnode:cc.SpriteAtlas,atlasnodenumber:0,loadatlas:!1,SnakeNode:{"default":[],type:cc.Node},machine:{"default":[],machineSkin:cc.Node,machineSkinJs:cc.Node},skina_longscore:cc.Label,skina_kill:cc.Label},onLoad:function(){this.SkinNode=cc.instantiate(this.EnikPrefab),this.SkinNodeJs=this.SkinNode.getComponent("Skin"),this.SkinNodeJs.skin_init(8,!1),this.skin_map.addChild(this.SkinNode,1),this.loadtempskinpos.x=t.newNumber(-2400,2400),this.loadtempskinpos.y=t.newNumber(-2400,2400),this.SkinNode.position=cc.p(this.loadtempskinpos.x,this.loadtempskinpos.y),this.skin_map.position=cc.p(-this.loadtempskinpos.x,-this.loadtempskinpos.y),this.skina_longscore.string=this.SkinNodeJs.skin_nodelong;for(var i=0;i<50;i++){this.machine[i]=new cc.Node,this.machine[i].machineSkin=new cc.Node,this.machine[i].machineSkinJs=new cc.Node,this.machine[i].machineSkin=cc.instantiate(this.EnikPrefab);var n=this.machine[i].machineSkin;this.machine[i].machineSkinJs=n.getComponent("Skin");var e=this.machine[i].machineSkinJs;e.skin_init(8,!0),this.skin_map.addChild(n,1),n.position=cc.p(t.newNumber(-2400,2400),t.newNumber(-2400,2400))}var s=this;cc.loader.loadRes("skin/snakenode",cc.SpriteAtlas,function(i,n){return i?(cc.error(i),void cc.log("取数据失败！")):(s.loadatlas=!0,void(s.atlasnode=n))}),cc.director.getScheduler().schedule(this.MapmoveSchedule,this,.5)},tiledmapinit:function(){},MapmoveSchedule:function(i){if("move"===this.SkinNodeJs.skinstat){var n=this.SkinNodeJs.getskinheadpos(),e=n.x-this.tempskinpos.x,t=n.y-this.tempskinpos.y;if(Math.abs(e)>10|Math.abs(t)>8){var s=cc.moveTo(1.5,cc.p(-this.loadtempskinpos.x-n.x,-this.loadtempskinpos.y-n.y));this.skin_map.runAction(s),this.tempskinpos=n}for(var o=0;o<this.atlasnodenumber;o++){var a=Math.abs(this.SkinNode.x+n.x-this.SnakeNode[o].position.x),c=Math.abs(this.SkinNode.y+n.y-this.SnakeNode[o].position.y);if(a<40&c<40){var s=cc.moveTo(.2,cc.p(this.SkinNode.x+n.x,this.SkinNode.y+n.y)),r=cc.callFunc(this.skionodemove,this,[this.SkinNodeJs,o]),h=cc.repeatForever(cc.sequence(s,r));this.SnakeNode[o].runAction(h)}for(var d=0;d<50;d++){var k=this.machine[d].machineSkinJs.getskinheadpos();if(Math.abs(this.machine[d].machineSkin.x+k.x-n.x-this.SkinNode.x)<500&Math.abs(this.machine[d].machineSkin.y+k.y-this.SkinNode.y-n.y)<400){var p=Math.abs(this.machine[d].machineSkin.x+k.x-this.SnakeNode[o].position.x),m=Math.abs(this.machine[d].machineSkin.y+k.y-this.SnakeNode[o].position.y);if(p<40&m<40){var s=cc.moveTo(.2,cc.p(this.machine[d].machineSkin.x+k.x,this.machine[d].machineSkin.y+k.y)),r=cc.callFunc(this.skionodemove,this,[this.machine[d].machineSkinJs,o]),h=cc.repeatForever(cc.sequence(s,r));this.SnakeNode[o].runAction(h)}}}}}},Settildmaprad:function(i){this.playskinrab=i,this.SkinNodeJs.skin_setRad(this.playskinrab)},skionodemove:function(i,n){var e=n[1];this.SnakeNode[e].destroy(),this.SnakeNode[e]=new cc.Node;var s=this.SnakeNode[e].addComponent(cc.Sprite);s.spriteFrame=this.atlasnode.getSpriteFrame("node"+t.newNumber(1,8)),this.SnakeNode[e].position=cc.p(t.newNumber(-2400,2400),t.newNumber(-2400,2400)),n[0].skin_addnode(),this.skina_longscore.string=this.SkinNodeJs.skin_nodelong},update:function(i){if(this.loadatlas&this.atlasnodenumber<500)for(var n=800-this.atlasnodenumber,e=this.atlasnodenumber;e<n;e++){this.SnakeNode[e]=new cc.Node;var s=this.SnakeNode[e].addComponent(cc.Sprite);s.spriteFrame=this.atlasnode.getSpriteFrame("node"+t.newNumber(1,8)),this.SnakeNode[e].position=cc.p(t.newNumber(-2400,2400),t.newNumber(-2400,2400)),this.skin_map.addChild(this.SnakeNode[e]),this.atlasnodenumber++}}}),cc._RFpop()},{enemyNumber:"enemyNumber"}],enemyNumber:[function(i,n,e){"use strict";function t(i,n){return Math.round(Math.random()*(n-i)+i)}function s(i,n,e){var t,s=new Array,o=0;if(!(i>n||i<0||n<0||e<0||n-i+1<e)){for(var a=0;a<e;a++){if(t=this.newNumber(i,n),this.isHaveThisNumber(s,t))for(;this.isHaveThisNumber(s,t);)t=this.newNumber(i,n);s[o++]=t}return s}}cc._RFpush(n,"ac498lB8upCj40UO2DKAcmV","enemyNumber"),n.exports={newNumber:t,newRandomNumbersWithNoRepeat:s},cc._RFpop()},{}],memu:[function(i,n,e){"use strict";cc._RFpush(n,"c347eLf5r5Por2AxplPU1j2","memu"),cc.Class({"extends":cc.Component,properties:{audioMng:cc.Node},onLoad:function(){},playGame:function(){cc.director.loadScene("play_game")},update:function(i){}}),cc._RFpop()},{}]},{},["Skin","TiledMapjs","enemyNumber","memu","Joystick","Skin_play"]);